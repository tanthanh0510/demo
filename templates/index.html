<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>File Upload</title>
    <style>
      #main {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
      }

      .form {
        width: 100%;
        text-align: center;
      }
      #image {
        text-align: center;
        /* float: left; */
        width: 50%;
      }
      img {
        width: 50vw;
        max-height: 800px;
      }
    </style>
  </head>
  <body>
    <div id="main">
      <form
        class="form"
        action="/upload"
        method="post"
        enctype="multipart/form-data"
      >
        <input
          type="file"
          name="file"
          accept=".png, .jpg, .jpeg, .gif, .dicom"
          onchange="submitForm()"
        />
      </form>

      {% if encoded_image %}
      <div id="image">
        <img
          src="data:image/png;base64,{{ encoded_image }}"
          alt="Uploaded Image"
        />
        {% if text %}
        <p>
          {% for line in text %} {{ line }} <br />
          {% endfor %}
        </p>
        {% endif %}
      </div>
      {% endif %}
    </div>
    <script>
      function submitForm() {
        document.querySelector(".form").submit();
      }
    </script>
  </body>
</html>
